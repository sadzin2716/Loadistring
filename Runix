--// Runix ESP Button (Draggable + Neon Style)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

--// Criar GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

--// Criar Botão
local Button = Instance.new("Frame")
Button.Size = UDim2.new(0, 150, 0, 50)
Button.Position = UDim2.new(0.05, 0, 0.1, 0)
Button.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
Button.BackgroundTransparency = 0.25
Button.BorderSizePixel = 0
Button.Parent = ScreenGui

-- Glow branco neon
local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.fromRGB(255, 255, 255)
UIStroke.Thickness = 2
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
UIStroke.Parent = Button

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = Button

-- Texto do botão
local Label = Instance.new("TextLabel")
Label.Size = UDim2.new(1, 0, 1, 0)
Label.BackgroundTransparency = 1
Label.Text = "ESP: OFF"
Label.TextColor3 = Color3.fromRGB(255, 255, 255)
Label.Font = Enum.Font.GothamBold
Label.TextScaled = true
Label.Parent = Button

-- Tornar o botão arrastável
local dragging, dragInput, dragStart, startPos

Button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or 
	   input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = Button.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

Button.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or 
	   input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - dragStart
		Button.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
end)

--// Funções do ESP
local espEnabled = false

local function ApplyESP(player)
	if not player.Character then return end
	local char = player.Character

	if not char:FindFirstChild("RunixESP") then
		local h = Instance.new("Highlight")
		h.Name = "RunixESP"
		h.FillTransparency = 1 -- só linha
		h.OutlineColor = Color3.fromRGB(255, 255, 255)
		h.OutlineTransparency = 0
		h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
		h.Parent = char
	end

	char.RunixESP.Enabled = true
end

local function RemoveESP(player)
	if player.Character and player.Character:FindFirstChild("RunixESP") then
		player.Character.RunixESP.Enabled = false
	end
end

-- Ativar e desativar
local function ToggleESP()
	espEnabled = not espEnabled
	Label.Text = espEnabled and "ESP: ON" or "ESP: OFF"
	UIStroke.Color = espEnabled and Color3.fromRGB(0, 255, 150) or Color3.fromRGB(255, 255, 255)

	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= LocalPlayer then
			if espEnabled then ApplyESP(p) else RemoveESP(p) end
		end
	end
end

-- Clicar no botão ativa/desativa
Button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		ToggleESP()
	end
end)

-- Atualizar quando novos jogadores entrarem
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function()
		if espEnabled then ApplyESP(player) end
	end)
end)
